% Arquivo LaTeX de exemplo de dissertação/tese a ser apresentados à CPG do IME-USP
% 
% Versão 5: Sex Mar  9 18:05:40 BRT 2012
%
% Criação: Jesús P. Mena-Chalco
% Revisão: Fabio Kon e Paulo Feofiloff
%  
% Obs: Leia previamente o texto do arquivo README.txt

\documentclass[11pt,twoside,a4paper]{book}

% ---------------------------------------------------------------------------- %
% Pacotes 

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}           % usamos arquivos pdf/png como figuras
%\usepackage{setspace}                   % espaçamento flexível
\usepackage{indentfirst}                % indentação do primeiro parágrafo
\usepackage{makeidx}                    % índice remissivo
\usepackage[nottoc]{tocbibind}          % acrescentamos a bibliografia/indice/conteudo no Table of Contents
\usepackage{courier}                    % usa o Adobe Courier no lugar de Computer Modern Typewriter
\usepackage{fix-cm}                    % fontes realmente escaláveis
\usepackage{listings}                   % para formatar código-fonte (ex. em Java)
\usepackage{titletoc}
%\usepackage[bf,small,compact]{titlesec} % cabeçalhos dos títulos: menores e compactos
%\usepackage[fixlanguage]{babelbib}
\usepackage[font=small,format=plain,labelfont=bf,up,textfont=it,up]{caption}
\usepackage[usenames,svgnames,dvipsnames]{xcolor}
\usepackage[a4paper,top=2.54cm,bottom=2.0cm,left=2.0cm,right=2.54cm,headheight=23pt]{geometry} % margens
%\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=black,linkcolor=black,urlcolor=black,filecolor=black,bookmarksopen=true]{hyperref} % links em preto
\usepackage[square,sort,nonamebreak,comma]{natbib}  % citação bibliográfica alpha (alpha-ime.bst)
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}

% ---------------------------------------------------------------------------- %
% Cabeçalhos similares ao TAOCP de Donald E. Knuth
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\MakeUppercase{#1}}{}}
\renewcommand{\headrulewidth}{0pt}

\usepackage{setspace}
\usepackage{multirow}
\usepackage{array}
\usepackage{import}
\usepackage{tikz}
\usepackage{colortbl}
\usepackage{tabularx}
\usepackage{flushend}
\usepackage{amsmath}
\usepackage{epstopdf}
\usepackage{float}
\usepackage{xcolor,colortbl}
\usepackage{subcaption}
\usepackage{keyval,xparse}
\mathchardef\mhyphen="2D
\usepackage[stable,perpage,flushmargin]{footmisc}
\usetikzlibrary{positioning}
\usepackage{varwidth}

%load hyperref last
\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=DarkGreen,linkcolor=NavyBlue,urlcolor=DarkRed,filecolor=green,bookmarksopen=true,bookmarks=false]{hyperref} % links coloridos

\input{macros}

% ---------------------------------------------------------------------------- %
\frenchspacing                          % arruma o espaço: id est (i.e.) e exempli gratia (e.g.) 
\urlstyle{same}                         % URL com o mesmo estilo do texto e não mono-spaced
\makeindex                              % para o índice remissivo
\raggedbottom                           % para não permitir espaços extra no texto
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}
\cleardoublepage
\normalsize

% ---------------------------------------------------------------------------- %
% Opções de listing usados para o código fonte
% Ref: http://en.wikibooks.org/wiki/LaTeX/Packages/Listings
\lstset{ %
language=Java,                  % choose the language of the code
basicstyle=\footnotesize,       % the size of the fonts that are used for the code
numbers=left,                   % where to put the line-numbers
numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
stepnumber=1,                   % the step between two line-numbers. If it's 1 each line will be numbered
numbersep=5pt,                  % how far the line-numbers are from the code
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
frame=single,                    % adds a frame around the code
framerule=0.6pt,
tabsize=2,                        % sets default tabsize to 2 spaces
captionpos=b,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
escapeinside={\%*}{*)},         % if you want to add a comment within your code
backgroundcolor=\color[rgb]{1.0,1.0,1.0}, % choose the background color.
rulecolor=\color[rgb]{0.8,0.8,0.8},
extendedchars=true,
xleftmargin=10pt,
xrightmargin=10pt,
framexleftmargin=10pt,
framexrightmargin=10pt
}

% ---------------------------------------------------------------------------- %
% Corpo do texto
\begin{document}
\hypersetup{pageanchor=false}
\frontmatter
% cabeçalho para as páginas das seções anteriores ao capítulo 1 (frontmatter)
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}
\setcounter{tocdepth}{2}
\fancyhead[LE]{\thepage\hspace{2em}\footnotesize{\leftmark}}
\fancyhead[RE,LO]{}
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}

\onehalfspacing  % espaçamento

% ---------------------------------------------------------------------------- %
% CAPA
% Nota: O título para as dissertações/teses do IME-USP devem caber em um 
% orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
\thispagestyle{empty}
\begin{center}
    \vspace*{2.3cm}
    \textbf{\Large{\phdTitle}}\\
    
    \vspace*{1.2cm}
    \Large{Samuel Martins Barbosa Neto}
    
    \vskip 2cm
    \textsc{
    Thesis presented\\[-0.25cm] 
    to the\\[-0.25cm]
    Institute of Mathematics and Statistics\\[-0.25cm]
    of the\\[-0.25cm]
    University of São Paulo\\[-0.25cm]
    as requirement\\[-0.25cm]
    to obtain the title\\[-0.25cm]
    of\\[-0.25cm]
    Doctor of Philosophy}
    
    \vskip 1.5cm
    Program: Computer Science\\
    Advisor: Prof. Dr. Roberto Marcondes Cesar Jr.\\
    Coadvisor: Dr. Claudio Santos Pinhanez \\
    Foreign Advisor: Prof. Dr. Dan Cosley

       \vskip 1cm
    \normalsize{The author received financial support from CAPES/CNPq/FAPESP}
    
    \vskip 0.5cm
    \normalsize{São Paulo, \finalMonth~\thesisYear}
\end{center}

% % ---------------------------------------------------------------------------- %
% % Página de rosto (Só PARA A VERSãO DEPOSITADA - ANTES DA DEFESA)
% % Resolução CoPGr 5890 (20/12/2010)
% %
% % IMPORTANTE:
% %   Coloque um '%' em todas as linhas
% %   desta página antes de compilar a versão
% %   final, corrigida, do trabalho
% %
% %
% \newpage
% \thispagestyle{empty}
%     \begin{center}
%         \vspace*{2.3 cm}
%         \textbf{\Large{\phdTitle}}\\
%         \vspace*{2 cm}
%     \end{center}

%     \vskip 2cm

%     \begin{flushright}
%     This is the original version of the thesis written by the\\
%     candidate (Samuel Martins Barbosa Neto), as\\
%     submitted to the Judging Committee.
%     \end{flushright}

% \pagebreak


 %---------------------------------------------------------------------------- %
 %Página de rosto (Só PARA A VERSãO CORRIGIDA - APóS DEFESA)
 %Resolução CoPGr 5890 (20/12/2010)
%
 %Nota: O título para as dissertações/teses do IME-USP devem caber em um 
 %orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
%
 %IMPORTANTE:
   %Coloque um '%' em todas as linhas desta
   %página antes de compilar a versão do trabalho que será entregue
   %à Comissão Julgadora antes da defesa
%
%
\newpage
\thispagestyle{empty}
    \begin{center}
        \vspace*{2.3 cm}
        \textbf{\Large{\phdTitle}}\\
        \vspace*{2 cm}
    \end{center}

    \vskip 2cm

    \begin{flushright}
    This version of the thesis contains the corrections and suggestions given by\\
    the Judging Committee during the defense of the original version of the work,\\
    that took place on \thesisMonth~\thesisDay, \thesisYear. A copy of the original version is available at the\\
    Institute of Mathematics and Statistics of the
University of São Paulo.

    \vskip 2cm

    \end{flushright}
    \vskip 4.2cm

    \begin{quote}
    \noindent Judging Committee:
    
    \begin{itemize}
        \item Prof. Dr. Roberto Marcondes Cesar Junior --- IME --- USP
        \item Dr. Claudio Santos Pinhanez --- IBM Research Brazil
        \item Prof. Dr. Denis Deratani Mauá --- IME --- USP
        \item Prof. Dr. Jesus Mena---Chalco --- UFABC
        \item Prof. Dr. Luciano Digiampietri --- EACH --- USP
    \end{itemize}
      
    \end{quote}
\pagebreak


\pagenumbering{roman}     % começamos a numerar 

% ---------------------------------------------------------------------------- %
% Agradecimentos:
% Se o candidato não quer fazer agradecimentos, deve simplesmente eliminar esta página 
\chapter*{Acknowledgements}

This thesis came to be in great part due to the efforts and support of Dan Cosley, to whom I am greatly thankful. The discussions and contributions of Amit Sharma were also very much appreciated. This was a 5-year journey, which I dedicate to family and friends, all those who made it so enjoyable. Far too many people provided precious contributions in the most varied ways, some are still around while others drifted away, but in thought I will cherish all the moments that led to this conclusion.


% ---------------------------------------------------------------------------- %
% Resumo
\chapter*{Resumo}

\noindent \surnameAbbr~\textbf{\phdTitleBr}. 
\thesisYear. \thesisPages f. Tese (Doutorado) - Instituto de Matemática e Estatística,
Universidade de São Paulo, São Paulo, \thesisYear.
\\

Comunidades online proporcionam um ambiente fértil para a análise do comportamento de indivíduos e avanços na compreensão de processos sociais. Por exemplo, quando modelamos interações sociais online, é importante compreender quando indivíduos estão reagindo a outros indivíduos. Além disso, pessoas e comunidades mudam com o passar do tempo, e nós argumentamos que análises de comunidades online que levam em consideração a evolução temporal fornecem resultados mais precisos e profundos. Entretanto, em muitos casos, o comportamento de usuários pode facilmente ser perdido: muitas das reações dos usuários ao conteúdo que são expostos não são capturadas por indicadores explicitos (como \textsl{likes} no Facebook ou \textit{replies} no Twitter). Agregações temporais de dados pouco criteriosas podem ocultar, enviesar ou mesmo levar a conclusões equivocadas sobre a forma como os usuários evoluem. 

Para tratar o problema de detectar respostas não-explicitas, nós apresentamos uma nova abordagem que utiliza a similaridade medida por tf-idf (frequência do termo–inverso da frequência nos documentos)entre os tweets de um usuário e os tweets recentes que este usuário recebeu das pessoas que ele segue. Nos baseando em dados de postagens de um mês para 449 redes egocêntricas no Twitter, este método evidencia que temos um provável volume de ao menos 11\% de reações que não são capturadas pelos mecanismos explicitos de \textit{reply} e \textit{retweet}. Mais do que isso, essas reações que não são capturadas não estão uniformemente distribuídas entre os usuários: alguns usuários que criam \textit{replies} e \textit{retweets} sem utilizar os mecanismos formais da interface são muito mais responsivos a quem eles seguem do que aparentam. Isso sugere que detectar respostas não-explicitas é importante quando consideramos mitigar viéses e construir modelos mais precisos baseados nestes identificadores de respostas a fim de estudar interações sociais e difusão de informação. 

Nós também abordamos o problema de evolução dos usuários no Reddit, nos baseando em dados de comentários e submissões no período de 2007 a 2014. Mesmo utilizando um dos métodos mais simples de diferenciação temporal dos usuários -- cohorts anuais --- nós encontramos amplas diferenças entre o comportamento dos indivíduos, que incluem criação de comentários, métricas de esforço e sobrevivência. Além disso, não considerar a evolução temporal pode levar a equívocos a repeito de fenômenos importantes. Por exemplo, uma de nosssas observações é que o tamanho médio dos comentários na rede decresce ao longo de qualquer intervalo de tempo arbitrário, mas o tamanho médio dos comentários em cada uma das cohorts de usuários é crescente no mesmo intervalo de tempo, salvo de uma queda inicial, que caracteriza uma observação do Paradoxo de Simpson. Dividindo as cohorts de usuários em sub-cohorts baseadas em anos de sobrevivência na rede nos fornece uma perspectiva melhor;  usuários que sobrevivem por mais tempo apresentam um maior nível de atividade inicial, fazendo mais comentários mais curtos do que aqueles usuários que sobrevivem menos. Estes elementos nos fornecem uma compreensão melhor de como usuários no Reddit evoluem e levantam uma série de questões interessantes a respeito de futuros desdobramentos do estudo de comportamento online.
\\

\noindent \textbf{Palavras-chave:} comportamento de usuários, redes sociais, reações, paradoxo de simpson, twitter, reddit.

% ---------------------------------------------------------------------------- %
% Abstract
\chapter*{Abstract}
\noindent \surnameAbbr~\textbf{\phdTitle}.
\thesisYear. \thesisPages p. Thesis (Ph.D.) - Institute of Mathematics and Statistics,
University of São Paulo, São Paulo, \thesisYear.
\\


Online communities provide a fertile ground for analyzing people's behavior and improving our understanding of social processes. For instance, when modeling social interaction online, it is important to understand when people are reacting to each other. Also, since both people and communities change over time, we argue that analyses of online communities that take time into account will lead to deeper and more accurate results. In many cases, however, users’ behavior can be easily missed: users react to content in many more ways than observed by explicit indicators (such as likes on Facebook or replies on Twitter) and poorly aggregated temporal data might hide, misrepresent and even lead to wrong conclusions about how users are evolving. 

In order to address the problem of detecting non-explicit responses, we present a new approach that uses tf-idf similarity between a user's own tweets and recent tweets by people they follow. Based on a month's worth of posting data from 449 ego networks in Twitter, this method demonstrates that it is likely that at least 11\% of reactions are not captured by the explicit reply and retweet mechanisms. Further, these uncaptured reactions are not evenly distributed between users: some users, who create replies and retweets without using the official interface mechanisms, are much more responsive to followees than they appear. This suggests that detecting non-explicit responses is an important consideration in mitigating biases and building more accurate models when using these markers to study social interaction and information diffusion. 

We also address the problem of users evolution in Reddit based on comment and submission data from 2007 to 2014. Even using one of the simplest temporal differences between users—yearly cohorts—we find wide differences in people's behavior, including comment activity, effort, and survival. Furthermore, not accounting for time can lead us to misinterpret important phenomena. For instance, we observe that average comment length decreases over any fixed period of time, but comment length in each cohort of users steadily increases during the same period after an abrupt initial drop, an example of Simpson's Paradox. Dividing cohorts into sub-cohorts based on the survival time in the community provides further insights; in particular, longer-lived users start at a higher activity level and make more and shorter comments than those who leave earlier. These findings both give more insight into user evolution in Reddit in particular, and raise a number of interesting questions around studying online behavior going forward.
\\

\noindent \textbf{Keywords:} users' behavior, social networks, reaction, simpson's paradox, twitter, reddit.

% ---------------------------------------------------------------------------- %
% Sumário
\tableofcontents    % imprime o sumário

% ---------------------------------------------------------------------------- %
\chapter{List of Abbreviations}
\begin{table}[htbp]
	\begin{tabular}{>{\raggedright\arraybackslash}m{5cm}m{11cm}}
					 tf  				 & Term frequency \\
					 idf         & Inverse document frequency \\
                     LDA         & Latent Dirichlet Allocation \\
					 % Reply 			 & Tweet that is a reply as given by the API \\
					 % Retweet 			 & Tweet that is a retweet as given by the API \\
					 % Tagged         & Tweets that are either a Reply ou Retweet as given by the API \\
					 % Non-Tagged         & Tweets that are not a Reply ou Retweet as given by the API \\
					 % High Scored         & Tweets that presented our method's score above a defined threshold \\
					 RT         & Retweet \\
                     NLTK         & Natural Language Toolkit \\
					 % submission         & A new topic (usually containing a url) that is created in reddit \\
					 % comment         & A comment that is made in a particular topic in reddit \\
					 % posts         & Either a comment or submission in reddit \\
					 % active user         & A user is active in a particular month when he/she made at least one post in that time discretization \\
					 % active subreddit         & A subreddit is active in a particular month when it received at least one post in that time discretization \\
					 % user's creation time         & Date and time of the user's first post \\
					 % time in the user referential         & Time measured since the user's first post \\
	\end{tabular}
\end{table}

% ---------------------------------------------------------------------------- %
\chapter{List of Symbols}
\begin{table}[htbp]
	\begin{tabular}{>{\raggedright\arraybackslash}m{2cm}m{14cm}}
					$u$    & User that is the center of the ego-network\\
					$u_i$    & $i$-th user that is the center of an ego-network\\
					$t_i$    & Tweet $i$ from user $u$\\
					$f_i$    & Followee $i$\\
					$ft_i$    & Followee's tweet $i$\\
					$w_i$    & Window composed of the $n$ most recent followees' tweets ($n=100$ in our analysis) prior to tweet $t_i$\\
					$p_i^T$    & Percentage of the Tagged messages for a user $u_i$ in relation to the total of messages this user authored\\
					$p_i^N$    & Percentage of the Non-Tagged messages for a user $u_i$ in relation to the total of messages this user authored\\
	\end{tabular}
\end{table}

% ---------------------------------------------------------------------------- %
% Listas de figuras e tabelas criadas automaticamente
\listoffigures            
\listoftables            

% ---------------------------------------------------------------------------- %
% Capítulos do trabalho
\mainmatter

% cabeçalho para as páginas de todos os capítulos
\fancyhead[RE,LO]{\thesection}

\singlespacing              % espaçamento simples
%\onehalfspacing            % espaçamento um e meio
\hypersetup{pageanchor=true}

\input{figures/tex_vars}

\input{introduction}
\input{reactions}
\input{cohorts}
\input{conclusion}

% cabeçalho para os apêndices
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\appendixname\ \thechapter}} {\MakeUppercase{#1}} }
\fancyhead[RE,LO]{}
\appendix

% \input{appendix}

% ---------------------------------------------------------------------------- %
% Bibliografia````````
\backmatter \singlespacing   % espaçamento simples
\bibliographystyle{alpha-ime}% citação bibliográfica alpha
\bibliography{handpicked,library}

% ---------------------------------------------------------------------------- %
%% índice remissivo
%\index{TBP|see{periodicidade região codificante}}
%\index{DSP|see{processamento digital de sinais}}
%\index{STFT|see{transformada de Fourier de tempo reduzido}}
%\index{DFT|see{transformada discreta de Fourier}}
%\index{Fourier!transformada|see{transformada de Fourier}}
%
%\printindex   % imprime o índice remissivo no documento 

\end{document}
